"use strict";angular.module("installerSpaApp",["ngAnimate","ngCookies","ngRoute","ngSanitize","ngTouch","ngMaterial"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl",controllerAs:"about"}).when("/install",{templateUrl:"views/install.html",controller:"InstallCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("installerSpaApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("installerSpaApp").controller("InstallCtrl",["$scope","$installer",function(a,b){function c(){return a.ctrl.working=!0,a.config.apps=[],a.config.modules.forEach(function(b){a.config.apps.push(b.id)}),b.install(a.config).then(function(){alert("Installation complete, refreash the page.")},function(a){alert(a.data.message)})["finally"](function(){a.ctrl.working=!1})}a.install=c}]).controller("InstallDbmsCtrl",["$scope",function(a){a.dbEngines=[{id:"MySQL",title:"MySQL"}]}]).controller("InstallPackageCtrl",["$scope",function(a){function b(b){return b?a.modules.filter(c(b)):[]}function c(a){var b=angular.lowercase(a);return function(a){return-1!==angular.lowercase(a.description).indexOf(b)||-1!==angular.lowercase(a.title).indexOf(b)}}function d(){var a=[{id:"Pluf",title:"Pluf core",description:"Core pluf module"},{id:"User",title:"User manager",description:"A module to enable user management API."},{id:"Group",title:"Group manager",description:"A module to enable group managemnt API."},{id:"Role",title:"Role manager",description:"A module to manage role management API."},{id:"Tenant",title:"Tenant manager",description:"A module to mange multi-tenancy and usr tenants."},{id:"CMS",title:"Content management system",description:"Default content management system."},{id:"Bank",title:"Banks",description:"A module to add banck, recipt and payment API."},{id:"Config",title:"Configuration",description:"A module to enable tenants configurations API."},{id:"Setting",title:"Settings",description:"A module to manage setting configuration."},{id:"Spa",title:"Single page application",description:"Manage SPAs and resources."},{id:"Calendar",title:"Calendar",description:"A module to add calendar and API."},{id:"Monitor",title:"Monitor",description:"A module to enable monitoring."},{id:"SDP",title:"Sell digital products",description:" A module to manage digital product and selling."},{id:"Message",title:"Message",description:"A module to enable messages API."},{id:"Book",title:"Book",description:"A module to enable book manager."},{id:"Backup",title:"Backup",description:"A module to enable backup system."}];return a.forEach(function(a){a.image="images/package.svg"}),a}a.modules=d(),a.modules.forEach(function(b){a.config.modules.push(b)}),a.moduleSearch=b}]),angular.module("installerSpaApp").controller("ContactCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("installerSpaApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("installerSpaApp").run(["$rootScope","$mdSidenav",function(a,b){var c={};a.ctrl=c,a.config={modules:[]},a.toggleSidenav=function(a){b(a).toggle()},a.sidenavItems=[{originalPath:"/home",order:10,config:{icon:"home",name:"Home"}},{originalPath:"/contact",order:10,config:{icon:"phone",name:"Contact us"}},{originalPath:"/install",order:10,config:{icon:"apps",name:"Install"}},{originalPath:"/about",order:1,config:{icon:"face",name:"About us"}}]}]),angular.module("installerSpaApp").service("$installer",["$http","$httpParamSerializerJQLike",function(a,b){function c(c){return a({url:"/api/v1/run/install",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:b(c)})}return{install:c}}]),angular.module("installerSpaApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/contact.html","<div> <h1>Contact us!</h1> </div>"),a.put("views/install.html",'<div layout="column" layout-margin flex> <!-- 	Domain configuration --> <section md-whiteframe="6"> <md-toolbar> <h3>Domain</h3> <p>Config properties of domain. <br><a href="https://github.com/pluf/installer-spa/wiki">Read more</a></p> </md-toolbar> <div layout-padding> <md-input-container class="md-block" flex-gt-sm required> <label>Main domain</label> <input ng-model="config.domain"> </md-input-container> </div> </section> <!-- 	Admin configuration --> <section md-whiteframe="6"> <md-toolbar> <h3>Administrator</h3> <p>Config properties of administrator. <br><a href="https://github.com/pluf/installer-spa/wiki">Read more</a></p> </md-toolbar> <div layout-padding> <md-input-container class="md-block" flex-gt-sm required> <label>Email</label> <input ng-model="config.adminEmail"> </md-input-container> </div> </section> <!-- 	Multi tenancy configuration --> <section md-whiteframe="6"> <md-toolbar> <h3>Multi tenancy</h3> <p>Config properties of tenants. <br><a href="https://github.com/pluf/installer-spa/wiki">Read more</a></p> </md-toolbar> <div layout-padding> <md-switch ng-model="config.multitenant" aria-label="multitenant" ng-true-value="1" ng-false-value="0" class="md-warn"> Enable multi-tenancy </md-switch> </div> </section> <!-- 	Debug config --> <section md-whiteframe="6"> <md-toolbar> <h3>Debug mode</h3> <p>Config properties of debuging. <br><a href="https://github.com/pluf/installer-spa/wiki">Read more</a></p> </md-toolbar> <div layout-padding> <md-switch ng-model="config.debug" aria-label="multitenant" ng-true-value="1" ng-false-value="0" class="md-warn"> Enable debug mode </md-switch> </div> </section> <!-- 	DBMS config --> <section ng-controller="InstallDbmsCtrl" md-whiteframe="6"> <md-toolbar> <h3>DBMS</h3> <p>Config properties of DBMS. <br><a href="https://github.com/pluf/installer-spa/wiki">Read more</a></p> </md-toolbar> <div layout-padding> <md-input-container> <label>Data base engine</label> <md-select ng-model="config.db_engine"> <md-option ng-repeat="engine in dbEngines" ng-value="engine.id"> {{engine.title}} </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex-gt-sm required> <label>Server</label> <input ng-model="config.db_server"> </md-input-container> <md-input-container class="md-block" flex-gt-sm required> <label>Login</label> <input ng-model="config.db_login"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Password</label> <input ng-model="config.db_password"> </md-input-container> <md-input-container class="md-block" flex-gt-sm required> <label>Data base</label> <input ng-model="config.db_database"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Data base</label> <input ng-model="config.db_table_prefixt"> </md-input-container> </div> </section> <!-- 	Modeuls --> <section ng-controller="InstallPackageCtrl" md-whiteframe="6"> <md-toolbar> <h3>Server modules</h3> <p>Config properties of server modules. <br><a href="https://github.com/pluf/installer-spa/wiki">Read more</a></p> </md-toolbar> <div layout-padding> <md-contact-chips ng-model="config.modules" md-contacts="moduleSearch($query)" md-contact-name="title" md-contact-image="image" md-contact-email="description" md-require-match="true" md-highlight-flags="i" filter-selected="true" placeholder="Modules"> </md-contact-chips> </div> <md-list class="fixedRows"> <md-subheader class="md-no-sticky">Modules</md-subheader> <md-list-item class="md-2-line contact-item" ng-repeat="(index, module) in modules" ng-if="config.modules.indexOf(module) < 0"> <img ng-src="{{module.image}}" class="md-avatar" alt="{{module.id}}"> <div class="md-list-item-text compact"> <h3>{{module.title}}</h3> <p>{{module.description}}</p> </div> </md-list-item> </md-list> </section> <div> <md-button ng-click="install()"> <md-icon>install</md-icon> Install </md-button> </div> </div>'),a.put("views/main.html",'<div layout="column" layout-align="start center" layout-margin flex> <div ng-include="\'views/partials/brand.html\'"></div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p>HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites.</p> <h4>Angular</h4> <p>AngularJS is a toolset for building the framework most suited to your application development.</p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div> </div>'),a.put("views/partials/brand.html",'<div layout="column" layout-align="start center"> <h4>Pluf installer!</h4> <img src="images/yeoman.png" alt="I\'m Yeoman"> <p class="lead"> Always a pleasure scaffolding your apps.<br> <a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a> </p> </div>')}]);